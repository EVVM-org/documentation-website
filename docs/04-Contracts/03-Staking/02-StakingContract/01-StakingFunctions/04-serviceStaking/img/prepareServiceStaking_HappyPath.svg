<?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="609px" preserveAspectRatio="none" style="width:883px;height:609px;background:#FFFFFF;" version="1.1" viewBox="0 0 883 609" width="883px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="320" x="285.25" y="27.9951">prepareServiceStaking Transaction Flow</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="285" x="302.75" y="44.292">(Happy Path - Successful Execution)</text><rect fill="#FFFFFF" height="464.9219" style="stroke:#181818;stroke-width:1.0;" width="10" x="63.5" y="99.8906"/><rect fill="#FFD700" height="434.7891" style="stroke:#181818;stroke-width:1.0;" width="10" x="359.5" y="121.0234"/><rect fill="#00EE20" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="664.5" y="230.6875"/><rect fill="#00EE20" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="664.5" y="304.0859"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="68" x2="68" y1="89.8906" y2="573.8125"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="364" x2="364" y1="89.8906" y2="573.8125"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="669" x2="669" y1="89.8906" y2="573.8125"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="127" x="5" y="58.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="113" x="12" y="78.5889">Service Contract</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="127" x="5" y="572.8125"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="113" x="12" y="592.8076">Service Contract</text><rect fill="#FFD700" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="65" x="332" y="58.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51" x="339" y="78.5889">Staking</text><rect fill="#FFD700" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="65" x="332" y="572.8125"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51" x="339" y="592.8076">Staking</text><rect fill="#00EE20" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="53" x="643" y="58.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="650" y="78.5889">EVVM</text><rect fill="#00EE20" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="53" x="643" y="572.8125"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="650" y="592.8076">EVVM</text><rect fill="#FFFFFF" height="464.9219" style="stroke:#181818;stroke-width:1.0;" width="10" x="63.5" y="99.8906"/><rect fill="#FFD700" height="434.7891" style="stroke:#181818;stroke-width:1.0;" width="10" x="359.5" y="121.0234"/><rect fill="#00EE20" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="664.5" y="230.6875"/><rect fill="#00EE20" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="664.5" y="304.0859"/><polygon fill="#181818" points="347.5,117.0234,357.5,121.0234,347.5,125.0234,351.5,121.0234" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="73.5" x2="353.5" y1="121.0234" y2="121.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="267" x="80.5" y="115.9575">prepareServiceStaking(amountOfStaking)</text><line style="stroke:#181818;stroke-width:1.0;" x1="369.5" x2="411.5" y1="161.7891" y2="161.7891"/><line style="stroke:#181818;stroke-width:1.0;" x1="411.5" x2="411.5" y1="161.7891" y2="174.7891"/><line style="stroke:#181818;stroke-width:1.0;" x1="370.5" x2="411.5" y1="174.7891" y2="174.7891"/><polygon fill="#181818" points="380.5,170.7891,370.5,174.7891,380.5,178.7891,376.5,174.7891" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141" x="376.5" y="156.7231">onlyCA modifier check</text><path d="M529,134.0234 L529,189.0234 L711,189.0234 L711,144.0234 L701,134.0234 L529,134.0234 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M701,134.0234 L701,144.0234 L711,144.0234 L701,134.0234 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="161" x="535" y="151.0903">SECURITY: Only contracts</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="535" y="166.2231">can call this function</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115" x="535" y="181.356">EOAs are rejected</text><polygon fill="#181818" points="652.5,226.6875,662.5,230.6875,652.5,234.6875,656.5,230.6875" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="369.5" x2="658.5" y1="230.6875" y2="230.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141" x="376.5" y="210.4888">Query service balance</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="237" x="376.5" y="225.6216">balances[service][PRINCIPAL_TOKEN]</text><polygon fill="#181818" points="380.5,255.8203,370.5,259.8203,380.5,263.8203,376.5,259.8203" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="374.5" x2="668.5" y1="259.8203" y2="259.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="187" x="386.5" y="254.7544">amountServiceBeforeStaking</text><polygon fill="#181818" points="652.5,300.0859,662.5,304.0859,652.5,308.0859,656.5,304.0859" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="369.5" x2="658.5" y1="304.0859" y2="304.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="199" x="376.5" y="283.8872">Query staking contract balance</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="276" x="376.5" y="299.02">balances[address(this)][PRINCIPAL_TOKEN]</text><polygon fill="#181818" points="380.5,329.2188,370.5,333.2188,380.5,337.2188,376.5,333.2188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="374.5" x2="668.5" y1="333.2188" y2="333.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="188" x="386.5" y="328.1528">amountStakingBeforeStaking</text><line style="stroke:#181818;stroke-width:1.0;" x1="369.5" x2="411.5" y1="468.2813" y2="468.2813"/><line style="stroke:#181818;stroke-width:1.0;" x1="411.5" x2="411.5" y1="468.2813" y2="481.2813"/><line style="stroke:#181818;stroke-width:1.0;" x1="370.5" x2="411.5" y1="481.2813" y2="481.2813"/><polygon fill="#181818" points="380.5,477.2813,370.5,481.2813,380.5,485.2813,376.5,481.2813" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="167" x="376.5" y="357.2856">Store serviceStakingData:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="376.5" y="372.4185">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133" x="384.5" y="387.5513">service: msg.sender,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="189" x="384.5" y="402.6841">timestamp: block.timestamp,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="236" x="384.5" y="417.8169">amountOfStaking: amountOfStaking,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="191" x="384.5" y="432.9497">amountServiceBeforeStaking,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="188" x="384.5" y="448.0825">amountStakingBeforeStaking</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="376.5" y="463.2153">}</text><path d="M632,387.5508 L632,442.5508 L876,442.5508 L876,397.5508 L866,387.5508 L632,387.5508 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M866,387.5508 L866,397.5508 L876,397.5508 L866,387.5508 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="638" y="404.6177">CRITICAL: Metadata for</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="223" x="638" y="419.7505">validation in confirmServiceStaking</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="157" x="638" y="434.8833">Must be used in same tx</text><polygon fill="#181818" points="84.5,551.8125,74.5,555.8125,84.5,559.8125,80.5,555.8125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="78.5" x2="363.5" y1="555.8125" y2="555.8125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146" x="90.5" y="505.3481">Preparation completed</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149" x="90.5" y="520.481">Note left : NEXT STEPS:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="182" x="90.5" y="535.6138">1. caPay() to transfer tokens</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="90.5" y="550.7466">2. confirmServiceStaking()</text><!--SRC=[hLDHRzem47xthpYrBo0DnleoAQegqJHiQ0NIXbMRccfodGjuE7PaExIewd-V0qvB49hsiAV4Tz_TVVVTtRcn6u4N95EiAb1QU240bvIjlcXLoInKGcbuMdABv9MSV_HeKb9jEUCbTH4d2UerPmYXabPJPa-06Z0xum7IqXMNYnrWzm-dez7Lvy6W3OpkxYPR5AxN1PmE1b5qDY34SYiGIeqEZBwipmbpJQLnrRcIC1BgAPMThxGiDn1JkuGU91LZQ4nU2OYUaLKri4j87R6c5jy8-o_qBjue1iTBTcZXDBAptB-xUyaEcYEDePLLIR49Xr2eZESSDR0biXMHoYNGVB6q3f94uVVRyVnd03C71kObDgbaL0AZGe1TSWDv9RUjfpAQ3Gquhg3nDpABMQluLiy0RYhKcwPbUAI2IeQfz3_ctdiUxkFRyJGSnyFhN_FPjsZwyDvYQpBRHw_Lt4uShzWbvaetkf4CMrd-Gj3RcxQFCALPfjrOExKAtV_0T_V-Txxl2HBhGXfDVUWLjJH8vKigeV44K9X5tw3CK7-exPONwB8KPG2FGh5L_ysmTHyiMN1es0CT4tlVVQItLBws5ovqspOEXzS1JD3IpF471q_bcWhkNlLrSLaF9EUwQDz3AYULSJD2g0ncDSpG0i4-xmbMA-QtBe1uUrMxf4mLfK2thgcSrdm4vZMTQVHZ3iayYXCduwU-s_YORZfTi0fiVV2vEnkhLYZTHPprZ_Fgk3FV6w7dGlu0]--></g></svg>