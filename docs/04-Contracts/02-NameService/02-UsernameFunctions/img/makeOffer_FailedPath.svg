<?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1847px" preserveAspectRatio="none" style="width:1136px;height:1847px;background:#FFFFFF;" version="1.1" viewBox="0 0 1136 1847" width="1136px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="223" x="457.5" y="27.9951">makeOffer Transaction Flow</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="227" x="455.5" y="44.292">(Failed Path - Error Handling)</text><rect fill="#00CEEE" height="1590.6719" style="stroke:#181818;stroke-width:1.0;" width="10" x="429" y="166.0234"/><rect fill="#00EE20" height="283.8047" style="stroke:#181818;stroke-width:1.0;" width="10" x="867" y="727.2266"/><rect fill="#00EE20" height="171.0352" style="stroke:#181818;stroke-width:1.0;" width="10" x="867" y="1236.0938"/><rect fill="#F5B7B1" height="1526.5391" style="stroke:#000000;stroke-width:1.5;" width="1119" x="10" y="223.1563"/><rect fill="#FFFFFF" height="1480.2734" style="stroke:none;stroke-width:1.0;" width="1119" x="10" y="269.4219"/><rect fill="#F5B7B1" height="1355.8047" style="stroke:#000000;stroke-width:1.5;" width="1099" x="20" y="386.8906"/><rect fill="#FFFFFF" height="1309.5391" style="stroke:none;stroke-width:1.0;" width="1099" x="20" y="433.1563"/><rect fill="#F5B7B1" height="1238.6016" style="stroke:#000000;stroke-width:1.5;" width="1079" x="30" y="497.0938"/><rect fill="#FFFFFF" height="1110.6719" style="stroke:none;stroke-width:1.0;" width="1079" x="30" y="625.0234"/><rect fill="#FFFFFF" height="90.2031" style="stroke:#000000;stroke-width:1.5;" width="536.5" x="372" y="688.9609"/><rect fill="#FFFFFF" height="43.9375" style="stroke:none;stroke-width:1.0;" width="536.5" x="372" y="735.2266"/><rect fill="#F5B7B1" height="893.3984" style="stroke:#000000;stroke-width:1.5;" width="1059" x="40" y="835.2969"/><rect fill="#FFFFFF" height="795.7344" style="stroke:none;stroke-width:1.0;" width="1059" x="40" y="932.9609"/><rect fill="#FFFFFF" height="292.1328" style="stroke:#000000;stroke-width:1.5;" width="1039" x="50" y="1140.5625"/><rect fill="#F5B7B1" height="174.6016" style="stroke:#000000;stroke-width:1.5;" width="1019" x="60" y="1251.0938"/><rect fill="#FFFFFF" height="107.2031" style="stroke:none;stroke-width:1.0;" width="1019" x="60" y="1318.4922"/><rect fill="#FFFFFF" height="116.2031" style="stroke:#000000;stroke-width:1.5;" width="415" x="372" y="1519.0938"/><rect fill="#FFFFFF" height="56.9375" style="stroke:none;stroke-width:1.0;" width="415" x="372" y="1578.3594"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="125" x2="125" y1="134.8906" y2="1766.6953"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="434" x2="434" y1="134.8906" y2="1766.6953"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="871.5" x2="871.5" y1="134.8906" y2="1766.6953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="104" x="70" y="131.5889">User or Service</text><ellipse cx="125" cy="67.0938" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M125,75.0938 L125,102.0938 M112,83.0938 L138,83.0938 M125,102.0938 L112,117.0938 M125,102.0938 L138,117.0938 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="104" x="70" y="1778.6904">User or Service</text><ellipse cx="125" cy="1790.4922" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M125,1798.4922 L125,1825.4922 M112,1806.4922 L138,1806.4922 M125,1825.4922 L112,1840.4922 M125,1825.4922 L138,1840.4922 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#00CEEE" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="104" x="382" y="103.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90" x="389" y="123.5889">NameService</text><rect fill="#00CEEE" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="104" x="382" y="1765.6953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90" x="389" y="1785.6904">NameService</text><rect fill="#00EE20" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="53" x="845.5" y="103.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="852.5" y="123.5889">EVVM</text><rect fill="#00EE20" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="53" x="845.5" y="1765.6953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="852.5" y="1785.6904">EVVM</text><rect fill="#00CEEE" height="1590.6719" style="stroke:#181818;stroke-width:1.0;" width="10" x="429" y="166.0234"/><rect fill="#00EE20" height="283.8047" style="stroke:#181818;stroke-width:1.0;" width="10" x="867" y="727.2266"/><rect fill="#00EE20" height="171.0352" style="stroke:#181818;stroke-width:1.0;" width="10" x="867" y="1236.0938"/><polygon fill="#181818" points="417,162.0234,427,166.0234,417,170.0234,421,166.0234" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="125" x2="423" y1="166.0234" y2="166.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89" x="132" y="160.9575">makeOffer(&#183;&#183;&#183;)</text><line style="stroke:#181818;stroke-width:1.0;" x1="439" x2="481" y1="195.1563" y2="195.1563"/><line style="stroke:#181818;stroke-width:1.0;" x1="481" x2="481" y1="195.1563" y2="208.1563"/><line style="stroke:#181818;stroke-width:1.0;" x1="440" x2="481" y1="208.1563" y2="208.1563"/><polygon fill="#181818" points="450,204.1563,440,208.1563,450,212.1563,446,208.1563" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="234" x="446" y="190.0903">verifyAsyncNonce(user, nonce)</text><path d="M10,223.1563 L74,223.1563 L74,230.2891 L64,240.2891 L10,240.2891 L10,223.1563 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="1526.5391" style="stroke:#000000;stroke-width:1.5;" width="1119" x="10" y="223.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="25" y="236.2231">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="271" x="89" y="235.3667">[nonce already used]</text><line style="stroke:#181818;stroke-width:2.0;" x1="132" x2="142" y1="256.4219" y2="266.4219"/><line style="stroke:#181818;stroke-width:2.0;" x1="132" x2="142" y1="266.4219" y2="256.4219"/><line style="stroke:#181818;stroke-width:1.0;" x1="137" x2="428" y1="261.4219" y2="261.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="196" x="142" y="256.356">Revert with AsyncNonceAlreadyUsed()</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="1129" y1="270.4219" y2="270.4219"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="128" x="15" y="280.6323">[Nonce is available]</text><line style="stroke:#181818;stroke-width:1.0;" x1="439" x2="481" y1="332.125" y2="332.125"/><line style="stroke:#181818;stroke-width:1.0;" x1="481" x2="481" y1="332.125" y2="345.125"/><line style="stroke:#181818;stroke-width:1.0;" x1="440" x2="481" y1="345.125" y2="345.125"/><polygon fill="#181818" points="450,341.125,440,345.125,450,349.125,446,345.125" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154" x="446" y="327.0591">Validate offer conditions</text><path d="M612,289.2266 L612,374.2266 L852,374.2266 L852,299.2266 L842,289.2266 L612,289.2266 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M842,289.2266 L842,299.2266 L852,299.2266 L842,289.2266 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="44" x="618" y="306.2935">Any of:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="195" x="618" y="321.4263">&#8226; flagNotAUsername == 0x01</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="217" x="618" y="336.5591">&#8226; !verifyIfIdentityExists(username)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="618" y="351.6919">&#8226; amount == 0</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="219" x="618" y="366.8247">&#8226; expireDate &lt;= block.timestamp</text><path d="M20,386.8906 L84,386.8906 L84,394.0234 L74,404.0234 L20,404.0234 L20,386.8906 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="1355.8047" style="stroke:#000000;stroke-width:1.5;" width="1099" x="20" y="386.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="35" y="399.9575">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="159" x="99" y="399.1011">[Invalid offer conditions]</text><line style="stroke:#181818;stroke-width:2.0;" x1="132" x2="142" y1="420.1563" y2="430.1563"/><line style="stroke:#181818;stroke-width:2.0;" x1="132" x2="142" y1="430.1563" y2="420.1563"/><line style="stroke:#181818;stroke-width:1.0;" x1="137" x2="428" y1="425.1563" y2="425.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="225" x="142" y="420.0903">Revert with PreRegistrationNotValid</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="20" x2="1119" y1="434.1563" y2="434.1563"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="174" x="25" y="444.3667">[Offer conditions are valid]</text><line style="stroke:#181818;stroke-width:1.0;" x1="439" x2="481" y1="469.0938" y2="469.0938"/><line style="stroke:#181818;stroke-width:1.0;" x1="481" x2="481" y1="469.0938" y2="482.0938"/><line style="stroke:#181818;stroke-width:1.0;" x1="440" x2="481" y1="482.0938" y2="482.0938"/><polygon fill="#181818" points="450,478.0938,440,482.0938,450,486.0938,446,482.0938" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="242" x="446" y="464.0278">verifyMessageSignedForMakeOffer(&#183;&#183;&#183;)</text><path d="M30,497.0938 L94,497.0938 L94,504.2266 L84,514.2266 L30,514.2266 L30,497.0938 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="1238.6016" style="stroke:#000000;stroke-width:1.5;" width="1079" x="30" y="497.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="45" y="510.1606">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="181" x="109" y="509.3042">[Signature verification fails]</text><line style="stroke:#181818;stroke-width:2.0;" x1="132" x2="142" y1="571.1914" y2="581.1914"/><line style="stroke:#181818;stroke-width:2.0;" x1="132" x2="142" y1="581.1914" y2="571.1914"/><line style="stroke:#181818;stroke-width:1.0;" x1="137" x2="428" y1="576.1914" y2="576.1914"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="280" x="142" y="571.1255">Revert with InvalidSignatureOnNameService</text><path d="M444,519.2266 L444,619.2266 L594,619.2266 L594,529.2266 L584,519.2266 L444,519.2266 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M584,519.2266 L584,529.2266 L594,529.2266 L584,519.2266 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="450" y="536.2935">Invalid signature for:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="40" x="450" y="551.4263">&#8226; user</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="450" y="566.5591">&#8226; username</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82" x="450" y="581.6919">&#8226; expireDate</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="62" x="450" y="596.8247">&#8226; amount</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="51" x="450" y="611.9575">&#8226; nonce</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="30" x2="1109" y1="626.0234" y2="626.0234"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="122" x="35" y="636.2339">[Signature is valid]</text><line style="stroke:#181818;stroke-width:1.0;" x1="439" x2="481" y1="660.9609" y2="660.9609"/><line style="stroke:#181818;stroke-width:1.0;" x1="481" x2="481" y1="660.9609" y2="673.9609"/><line style="stroke:#181818;stroke-width:1.0;" x1="440" x2="481" y1="673.9609" y2="673.9609"/><polygon fill="#181818" points="450,669.9609,440,673.9609,450,677.9609,446,673.9609" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="175" x="446" y="655.895">makePay(user, amount, &#183;&#183;&#183;)</text><path d="M372,688.9609 L436,688.9609 L436,696.0938 L426,706.0938 L372,706.0938 L372,688.9609 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="90.2031" style="stroke:#000000;stroke-width:1.5;" width="536.5" x="372" y="688.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="387" y="702.0278">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="177" x="451" y="701.1714">[priorityFlag_EVVM == true]</text><polygon fill="#181818" points="855,723.2266,865,727.2266,855,731.2266,859,727.2266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="439" x2="861" y1="727.2266" y2="727.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="446" y="722.1606">IEvvm.pay(...) (async)</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="372" x2="908.5" y1="736.2266" y2="736.2266"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="183" x="377" y="746.437">[priorityFlag_EVVM == false]</text><polygon fill="#181818" points="855,767.1641,865,771.1641,855,775.1641,859,771.1641" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="439" x2="861" y1="771.1641" y2="771.1641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123" x="446" y="766.0981">IEvvm.pay(...) (sync)</text><line style="stroke:#181818;stroke-width:1.0;" x1="877" x2="919" y1="807.2969" y2="807.2969"/><line style="stroke:#181818;stroke-width:1.0;" x1="919" x2="919" y1="807.2969" y2="820.2969"/><line style="stroke:#181818;stroke-width:1.0;" x1="878" x2="919" y1="820.2969" y2="820.2969"/><polygon fill="#181818" points="888,816.2969,878,820.2969,888,824.2969,884,820.2969" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140" x="884" y="802.231">Verify payment inputs</text><path d="M40,835.2969 L104,835.2969 L104,842.4297 L94,852.4297 L40,852.4297 L40,835.2969 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="893.3984" style="stroke:#000000;stroke-width:1.5;" width="1059" x="40" y="835.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="55" y="848.3638">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="174" x="119" y="847.5073">[Payment verification fails]</text><line style="stroke:#181818;stroke-width:2.0;" x1="132" x2="142" y1="894.2617" y2="904.2617"/><line style="stroke:#181818;stroke-width:2.0;" x1="132" x2="142" y1="904.2617" y2="894.2617"/><line style="stroke:#181818;stroke-width:1.0;" x1="137" x2="866" y1="899.2617" y2="899.2617"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166" x="142" y="894.1958">Revert with payment error</text><path d="M882,857.4297 L882,927.4297 L1060,927.4297 L1060,867.4297 L1050,857.4297 L882,857.4297 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1050,857.4297 L1050,867.4297 L1060,867.4297 L1050,857.4297 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="60" x="888" y="874.4966">Could be:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="888" y="889.6294">&#8226; Insufficient balance</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="888" y="904.7622">&#8226; Invalid EVVM nonce</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="157" x="888" y="919.895">&#8226; Invalid EVVM signature</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="40" x2="1099" y1="933.9609" y2="933.9609"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="129" x="45" y="944.1714">[Payment succeeds]</text><line style="stroke:#181818;stroke-width:1.0;" x1="877" x2="919" y1="968.8984" y2="968.8984"/><line style="stroke:#181818;stroke-width:1.0;" x1="919" x2="919" y1="968.8984" y2="981.8984"/><line style="stroke:#181818;stroke-width:1.0;" x1="878" x2="919" y1="981.8984" y2="981.8984"/><polygon fill="#181818" points="888,977.8984,878,981.8984,888,985.8984,884,981.8984" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108" x="884" y="963.8325">Update balances</text><polygon fill="#181818" points="450,1007.0313,440,1011.0313,450,1015.0313,446,1011.0313" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="444" x2="871" y1="1011.0313" y2="1011.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="456" y="1005.9653">Payment processed</text><line style="stroke:#181818;stroke-width:1.0;" x1="439" x2="481" y1="1070.4297" y2="1070.4297"/><line style="stroke:#181818;stroke-width:1.0;" x1="481" x2="481" y1="1070.4297" y2="1083.4297"/><line style="stroke:#181818;stroke-width:1.0;" x1="440" x2="481" y1="1083.4297" y2="1083.4297"/><polygon fill="#181818" points="450,1079.4297,440,1083.4297,450,1087.4297,446,1083.4297" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="446" y="1035.0981">Find available offerID:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="414" x="446" y="1050.231">while (usernameOffers[username][offerID].offerer != address(0))</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="64" x="462" y="1065.3638">offerID++</text><line style="stroke:#181818;stroke-width:1.0;" x1="439" x2="481" y1="1112.5625" y2="1112.5625"/><line style="stroke:#181818;stroke-width:1.0;" x1="481" x2="481" y1="1112.5625" y2="1125.5625"/><line style="stroke:#181818;stroke-width:1.0;" x1="440" x2="481" y1="1125.5625" y2="1125.5625"/><polygon fill="#181818" points="450,1121.5625,440,1125.5625,450,1129.5625,446,1125.5625" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114" x="446" y="1107.4966">Store offer details</text><path d="M50,1140.5625 L114,1140.5625 L114,1147.6953 L104,1157.6953 L50,1157.6953 L50,1140.5625 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="292.1328" style="stroke:#000000;stroke-width:1.5;" width="1039" x="50" y="1140.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="65" y="1153.6294">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="197" x="129" y="1152.7729">[isAddressStaker(msg.sender)]</text><line style="stroke:#181818;stroke-width:1.0;" x1="439" x2="481" y1="1193.9609" y2="1193.9609"/><line style="stroke:#181818;stroke-width:1.0;" x1="481" x2="481" y1="1193.9609" y2="1206.9609"/><line style="stroke:#181818;stroke-width:1.0;" x1="440" x2="481" y1="1206.9609" y2="1206.9609"/><polygon fill="#181818" points="450,1202.9609,440,1206.9609,450,1210.9609,446,1206.9609" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="161" x="446" y="1173.7622">makeCaPay(msg.sender,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="263" x="446" y="1188.895">getRewardAmount() + priorityFee_EVVM)</text><polygon fill="#181818" points="855,1232.0938,865,1236.0938,855,1240.0938,859,1236.0938" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="439" x2="861" y1="1236.0938" y2="1236.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="60" x="446" y="1231.0278">caPay(&#183;&#183;&#183;)</text><path d="M60,1251.0938 L124,1251.0938 L124,1258.2266 L114,1268.2266 L60,1268.2266 L60,1251.0938 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="174.6016" style="stroke:#000000;stroke-width:1.5;" width="1019" x="60" y="1251.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="75" y="1264.1606">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="80" x="139" y="1263.3042">[caPay fails]</text><line style="stroke:#181818;stroke-width:2.0;" x1="132" x2="142" y1="1294.9258" y2="1304.9258"/><line style="stroke:#181818;stroke-width:2.0;" x1="132" x2="142" y1="1304.9258" y2="1294.9258"/><line style="stroke:#181818;stroke-width:1.0;" x1="137" x2="866" y1="1299.9258" y2="1299.9258"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147" x="142" y="1294.8599">Revert with caPay error</text><path d="M882,1273.2266 L882,1313.2266 L1056,1313.2266 L1056,1283.2266 L1046,1273.2266 L882,1273.2266 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1046,1273.2266 L1046,1283.2266 L1056,1283.2266 L1046,1273.2266 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153" x="888" y="1290.2935">Contract balance issues</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="888" y="1305.4263">or other EVVM errors</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="60" x2="1079" y1="1319.4922" y2="1319.4922"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="112" x="65" y="1329.7026">[caPay succeeds]</text><line style="stroke:#181818;stroke-width:1.0;" x1="877" x2="919" y1="1354.4297" y2="1354.4297"/><line style="stroke:#181818;stroke-width:1.0;" x1="919" x2="919" y1="1354.4297" y2="1367.4297"/><line style="stroke:#181818;stroke-width:1.0;" x1="878" x2="919" y1="1367.4297" y2="1367.4297"/><polygon fill="#181818" points="888,1363.4297,878,1367.4297,888,1371.4297,884,1367.4297" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="183" x="884" y="1349.3638">Update balances for rewards</text><polygon fill="#181818" points="450,1403.1289,440,1407.1289,450,1411.1289,446,1407.1289" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="444" x2="871" y1="1407.1289" y2="1407.1289"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118" x="456" y="1402.063">Reward distributed</text><path d="M882,1380.4297 L882,1420.4297 L1033,1420.4297 L1033,1390.4297 L1023,1380.4297 L882,1380.4297 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1023,1380.4297 L1023,1390.4297 L1033,1390.4297 L1023,1380.4297 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="888" y="1397.4966">Only stakers receive</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="888" y="1412.6294">reward + priority fee</text><line style="stroke:#181818;stroke-width:1.0;" x1="439" x2="481" y1="1491.0938" y2="1491.0938"/><line style="stroke:#181818;stroke-width:1.0;" x1="481" x2="481" y1="1491.0938" y2="1504.0938"/><line style="stroke:#181818;stroke-width:1.0;" x1="440" x2="481" y1="1504.0938" y2="1504.0938"/><polygon fill="#181818" points="450,1500.0938,440,1504.0938,450,1508.0938,446,1504.0938" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="446" y="1455.7622">Update locked tokens:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="258" x="446" y="1470.895">principalTokenTokenLockedForWithdrawOffers +=</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="268" x="446" y="1486.0278">((amount * 995) / 1000) + (amount / 800)</text><path d="M372,1519.0938 L436,1519.0938 L436,1526.2266 L426,1536.2266 L372,1536.2266 L372,1519.0938 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="116.2031" style="stroke:#000000;stroke-width:1.5;" width="415" x="372" y="1519.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="387" y="1532.1606">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="331" x="451" y="1531.3042">[offerID &gt; identityDetails[username].offerMaxSlots]</text><line style="stroke:#181818;stroke-width:1.0;" x1="439" x2="481" y1="1557.3594" y2="1557.3594"/><line style="stroke:#181818;stroke-width:1.0;" x1="481" x2="481" y1="1557.3594" y2="1570.3594"/><line style="stroke:#181818;stroke-width:1.0;" x1="440" x2="481" y1="1570.3594" y2="1570.3594"/><polygon fill="#181818" points="450,1566.3594,440,1570.3594,450,1574.3594,446,1570.3594" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="279" x="446" y="1552.2935">identityDetails[username].offerMaxSlots++</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="372" x2="787" y1="1579.3594" y2="1579.3594"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="304" x="377" y="1589.5698">[identityDetails[username].offerMaxSlots == 0]</text><line style="stroke:#181818;stroke-width:1.0;" x1="439" x2="481" y1="1614.2969" y2="1614.2969"/><line style="stroke:#181818;stroke-width:1.0;" x1="481" x2="481" y1="1614.2969" y2="1627.2969"/><line style="stroke:#181818;stroke-width:1.0;" x1="440" x2="481" y1="1627.2969" y2="1627.2969"/><polygon fill="#181818" points="450,1623.2969,440,1627.2969,450,1631.2969,446,1627.2969" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="279" x="446" y="1609.231">identityDetails[username].offerMaxSlots++</text><line style="stroke:#181818;stroke-width:1.0;" x1="439" x2="481" y1="1663.4297" y2="1663.4297"/><line style="stroke:#181818;stroke-width:1.0;" x1="481" x2="481" y1="1663.4297" y2="1676.4297"/><line style="stroke:#181818;stroke-width:1.0;" x1="440" x2="481" y1="1676.4297" y2="1676.4297"/><polygon fill="#181818" points="450,1672.4297,440,1676.4297,450,1680.4297,446,1676.4297" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="257" x="446" y="1658.3638">nameServiceNonce[user][nonce] = true</text><polygon fill="#181818" points="136,1716.6953,126,1720.6953,136,1724.6953,132,1720.6953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="130" x2="428" y1="1720.6953" y2="1720.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164" x="142" y="1700.4966">Offer created successfully</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="142" y="1715.6294">with offerID: {offerID}</text><!--SRC=[lLVRRkCs47tNLyncN-pcvXHOj1l40Tp4QGqq5yIxwKCIB6Xfv12HAOEaVC5YWVsM_Oc-zrFw9HsIkjfIRB_KGM2A6ixrdE7uJEbbXETU4Fl918M6hnx0Ryn__Lt6YGWkuYYMC7_X6hrltjbnAkqnNzF-tcU54cWnH3dZFku1Kv3GdZTbKdEVJnbftBjX4onBYE8PtdSw5_r-ltgW__1mRILnDfiOaNx_vuxdQQuZX0bxnTim9CEV91EAFE6nWAiedZ-9rXNZ4GPmn_GB749VIdBk3oQ2Y8jns_ECRt1uNl7WjD3O-kTlyzSsuV4PqrZhgbVUN5CsGyd3vI2yYOMF0zMRaKTi567Bs3u0ORR94nPfU1z-6FqoEYahiASUZUZpenLzXcuNj4oGoW8LKuSBcseoUOzaLCESKz1MGI-Io88bLIUmnpoC5Fblo-WaW2jWcMlUkkxLg1vOn0EJaDXctez5m4tUbJjRZcOWPaPuNHBIZuX9Z-JZ5qsAUs99agTFuj_lFo2CsFWcrZq3AsFVnDvPT4xSstTPQWS10PNhPN_1bLOsiKQwxSJOX82hxL6tWOifbtXfl3_hmYYA_TSZpIUeD9jC2wysflPEuZsEoQHa9Y1or6Obrs0NvKpVhcG0c4ImoV7gpTPZwHgLOcCSyh70u2gMrsjmpRMLws3acKwCIQE6-zPh2AdeHIssYpmjQQxnLfGeNTLLhcs619Lx4iOoBRMnKgoC2wl5AbVJhIqXAkRoXtBQYy09v2lftfXoqmlks39bgxD-06k9pfFjJ4ubZoKXyee0_CLqhmfhtp1k6zmfJDbogCco_CBKKlXvOLTFvtsfqXZB4kL4r7eLCfBOsQr6hr2iPDSUBLGyM0WRJVPsuMAQQ5MJnnIqTwdS1iWMXchncbb3q__NOorZz29EeW16cC9o85GIac5kZezOn0XnsHi7Pfj7YyIQ_HpfZJN90bI9xoC6JM7b-ViyjMqtTQLPl8hYpCfKndGekmRAdm0hMF8s8QAg_ugBeBW_NAiVN58EAKXwpbkoRLFgCNjyVambdu_iWWhthWii22GvsUgqgOCRqwdG_lwENWrf9ibkg02rHSqwXGhMSjLpfXt8MnCrFb84Q9JhpDkgSLmmqpeADGTFOepw7kTC1ZtRIbfjs2zuYMXfsVQsCPS2mhSscXf4SvEe5orHpofkuDeMd7F7wndNm3n1DwcVqupAeH9KJu96jbY_a05BAQkntgCohvpvHbPjnovpFu6qvTgiebf-LsG8p7Z0HuckeLmJzPhajalZhOWeRWjWHRxxo6VKcLmG9Qn1Y5YVH57lgLSdk1iVq-oQWOjcSXs_eb3K8oQq-Say_6bVq4Jp5m4ea6pksWNiTscIRwLpt4_myUE7DXp3IQVJCUp9NXp3hxJn9i7JHWBdmDEHyTArXQ8ZkKPqpHR3ADPgTzflgPXwsLletLAB7Mh_Lnzthlc6tp9kA7fR9UbC-qiwGDEF6UAJ8xTIOH95IxffJDF9BXxucgw-UKtOpjRcs_oNM5Yoxlq7]--></g></svg>