<?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1078px" preserveAspectRatio="none" style="width:871px;height:1078px;background:#FFFFFF;" version="1.1" viewBox="0 0 871 1078" width="871px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="311" x="281.5" y="27.9951">flushCustomMetadata Transaction Flow</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="285" x="294.5" y="44.292">(Happy Path - Successful Execution)</text><rect fill="#00CEEE" height="806.2578" style="stroke:#181818;stroke-width:1.0;" width="10" x="242" y="166.0234"/><rect fill="#00EE20" height="137.3359" style="stroke:#181818;stroke-width:1.0;" width="10" x="643" y="429.9531"/><rect fill="#00EE20" height="119.6641" style="stroke:#181818;stroke-width:1.0;" width="10" x="643" y="735.0859"/><rect fill="#FFFFFF" height="90.2031" style="stroke:#000000;stroke-width:1.5;" width="499.5" x="185" y="391.6875"/><rect fill="#FFFFFF" height="43.9375" style="stroke:none;stroke-width:1.0;" width="499.5" x="185" y="437.9531"/><rect fill="#FFFFFF" height="241.3281" style="stroke:#000000;stroke-width:1.5;" width="680" x="185" y="654.6875"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="60" x2="60" y1="134.8906" y2="997.2813"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="247" x2="247" y1="134.8906" y2="997.2813"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="647.5" x2="647.5" y1="134.8906" y2="997.2813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="104" x="5" y="131.5889">User or Service</text><ellipse cx="60" cy="67.0938" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M60,75.0938 L60,102.0938 M47,83.0938 L73,83.0938 M60,102.0938 L47,117.0938 M60,102.0938 L73,117.0938 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="104" x="5" y="1009.2764">User or Service</text><ellipse cx="60" cy="1021.0781" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M60,1029.0781 L60,1056.0781 M47,1037.0781 L73,1037.0781 M60,1056.0781 L47,1071.0781 M60,1056.0781 L73,1071.0781 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#00CEEE" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="104" x="195" y="103.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90" x="202" y="123.5889">NameService</text><rect fill="#00CEEE" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="104" x="195" y="996.2813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90" x="202" y="1016.2764">NameService</text><rect fill="#00EE20" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="53" x="621.5" y="103.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="628.5" y="123.5889">EVVM</text><rect fill="#00EE20" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="53" x="621.5" y="996.2813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="628.5" y="1016.2764">EVVM</text><rect fill="#00CEEE" height="806.2578" style="stroke:#181818;stroke-width:1.0;" width="10" x="242" y="166.0234"/><rect fill="#00EE20" height="137.3359" style="stroke:#181818;stroke-width:1.0;" width="10" x="643" y="429.9531"/><rect fill="#00EE20" height="119.6641" style="stroke:#181818;stroke-width:1.0;" width="10" x="643" y="735.0859"/><polygon fill="#181818" points="230,162.0234,240,166.0234,230,170.0234,234,166.0234" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="60" x2="236" y1="166.0234" y2="166.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="163" x="67" y="160.9575">flushCustomMetadata(&#183;&#183;&#183;)</text><line style="stroke:#181818;stroke-width:1.0;" x1="252" x2="294" y1="195.1563" y2="195.1563"/><line style="stroke:#181818;stroke-width:1.0;" x1="294" x2="294" y1="195.1563" y2="208.1563"/><line style="stroke:#181818;stroke-width:1.0;" x1="253" x2="294" y1="208.1563" y2="208.1563"/><polygon fill="#181818" points="263,204.1563,253,208.1563,263,212.1563,259,208.1563" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149" x="259" y="190.0903">onlyOwnerOfIdentity(&#183;&#183;&#183;)</text><line style="stroke:#181818;stroke-width:1.0;" x1="252" x2="294" y1="237.2891" y2="237.2891"/><line style="stroke:#181818;stroke-width:1.0;" x1="294" x2="294" y1="237.2891" y2="250.2891"/><line style="stroke:#181818;stroke-width:1.0;" x1="253" x2="294" y1="250.2891" y2="250.2891"/><polygon fill="#181818" points="263,246.2891,253,250.2891,263,254.2891,259,250.2891" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="171" x="259" y="232.2231">verifyIfNonceIsAvailable(&#183;&#183;&#183;)</text><line style="stroke:#181818;stroke-width:1.0;" x1="252" x2="294" y1="279.4219" y2="279.4219"/><line style="stroke:#181818;stroke-width:1.0;" x1="294" x2="294" y1="279.4219" y2="292.4219"/><line style="stroke:#181818;stroke-width:1.0;" x1="253" x2="294" y1="292.4219" y2="292.4219"/><polygon fill="#181818" points="263,288.4219,253,292.4219,263,296.4219,259,292.4219" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="321" x="259" y="274.356">verifyMessageSignedForFlushCustomMetadata(&#183;&#183;&#183;)</text><line style="stroke:#181818;stroke-width:1.0;" x1="252" x2="294" y1="321.5547" y2="321.5547"/><line style="stroke:#181818;stroke-width:1.0;" x1="294" x2="294" y1="321.5547" y2="334.5547"/><line style="stroke:#181818;stroke-width:1.0;" x1="253" x2="294" y1="334.5547" y2="334.5547"/><polygon fill="#181818" points="263,330.5547,253,334.5547,263,338.5547,259,334.5547" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="232" x="259" y="316.4888">verify customMetadataMaxSlots &gt; 0</text><line style="stroke:#181818;stroke-width:1.0;" x1="252" x2="294" y1="363.6875" y2="363.6875"/><line style="stroke:#181818;stroke-width:1.0;" x1="294" x2="294" y1="363.6875" y2="376.6875"/><line style="stroke:#181818;stroke-width:1.0;" x1="253" x2="294" y1="376.6875" y2="376.6875"/><polygon fill="#181818" points="263,372.6875,253,376.6875,263,380.6875,259,376.6875" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="377" x="259" y="358.6216">makePay(&#183;&#183;&#183;, getPriceToFlushCustomMetadata(identity), &#183;&#183;&#183;)</text><path d="M185,391.6875 L249,391.6875 L249,398.8203 L239,408.8203 L185,408.8203 L185,391.6875 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="90.2031" style="stroke:#000000;stroke-width:1.5;" width="499.5" x="185" y="391.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="200" y="404.7544">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="177" x="264" y="403.8979">[priorityFlag_EVVM == true]</text><polygon fill="#181818" points="631,425.9531,641,429.9531,631,433.9531,635,429.9531" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="252" x2="637" y1="429.9531" y2="429.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="259" y="424.8872">payStaker_async(&#183;&#183;&#183;)</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="185" x2="684.5" y1="438.9531" y2="438.9531"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="183" x="190" y="449.1636">[priorityFlag_EVVM == false]</text><polygon fill="#181818" points="631,469.8906,641,473.8906,631,477.8906,635,473.8906" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="252" x2="637" y1="473.8906" y2="473.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123" x="259" y="468.8247">payStaker_sync(&#183;&#183;&#183;)</text><line style="stroke:#181818;stroke-width:1.0;" x1="653" x2="695" y1="525.1563" y2="525.1563"/><line style="stroke:#181818;stroke-width:1.0;" x1="695" x2="695" y1="525.1563" y2="538.1563"/><line style="stroke:#181818;stroke-width:1.0;" x1="654" x2="695" y1="538.1563" y2="538.1563"/><polygon fill="#181818" points="664,534.1563,654,538.1563,664,542.1563,660,538.1563" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140" x="660" y="504.9575">Verify payment inputs</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="660" y="520.0903">and update balances</text><polygon fill="#181818" points="263,563.2891,253,567.2891,263,571.2891,259,567.2891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="257" x2="647" y1="567.2891" y2="567.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="207" x="269" y="562.2231">Payment processed successfully</text><line style="stroke:#181818;stroke-width:1.0;" x1="252" x2="294" y1="626.6875" y2="626.6875"/><line style="stroke:#181818;stroke-width:1.0;" x1="294" x2="294" y1="626.6875" y2="639.6875"/><line style="stroke:#181818;stroke-width:1.0;" x1="253" x2="294" y1="639.6875" y2="639.6875"/><polygon fill="#181818" points="263,635.6875,253,639.6875,263,643.6875,259,639.6875" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="229" x="259" y="591.356">for loop: delete all metadata entries</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="184" x="259" y="606.4888">for (i = 0; i &lt; maxSlots; i++)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="296" x="259" y="621.6216">{ delete identityCustomMetadata[identity][i] }</text><path d="M567,583.7891 L567,638.7891 L743,638.7891 L743,593.7891 L733,583.7891 L567,583.7891 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M733,583.7891 L733,593.7891 L743,593.7891 L733,583.7891 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="85" x="573" y="600.856">Batch delete:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113" x="573" y="615.9888">More gas efficient</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="155" x="573" y="631.1216">than individual removals</text><path d="M185,654.6875 L249,654.6875 L249,661.8203 L239,671.8203 L185,671.8203 L185,654.6875 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="241.3281" style="stroke:#000000;stroke-width:1.5;" width="680" x="185" y="654.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="200" y="667.7544">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="197" x="264" y="666.8979">[isAddressStaker(msg.sender)]</text><line style="stroke:#181818;stroke-width:1.0;" x1="252" x2="294" y1="692.9531" y2="692.9531"/><line style="stroke:#181818;stroke-width:1.0;" x1="294" x2="294" y1="692.9531" y2="705.9531"/><line style="stroke:#181818;stroke-width:1.0;" x1="253" x2="294" y1="705.9531" y2="705.9531"/><polygon fill="#181818" points="263,701.9531,253,705.9531,263,709.9531,259,705.9531" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="259" y="687.8872">makeCaPay(..)</text><polygon fill="#181818" points="631,731.0859,641,735.0859,631,739.0859,635,735.0859" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="252" x2="637" y1="735.0859" y2="735.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="60" x="259" y="730.02">caPay(&#183;&#183;&#183;)</text><line style="stroke:#181818;stroke-width:1.0;" x1="653" x2="695" y1="779.3516" y2="779.3516"/><line style="stroke:#181818;stroke-width:1.0;" x1="695" x2="695" y1="779.3516" y2="792.3516"/><line style="stroke:#181818;stroke-width:1.0;" x1="654" x2="695" y1="792.3516" y2="792.3516"/><polygon fill="#181818" points="664,788.3516,654,792.3516,664,796.3516,660,792.3516" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="660" y="759.1528">Update balances for</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="660" y="774.2856">staker rewards</text><polygon fill="#181818" points="263,850.75,253,854.75,263,858.75,259,854.75" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="257" x2="647" y1="854.75" y2="854.75"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="198" x="269" y="849.6841">Reward distributed successfully</text><path d="M658,805.3516 L658,890.3516 L850,890.3516 L850,815.3516 L840,805.3516 L658,805.3516 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M840,805.3516 L840,815.3516 L850,815.3516 L840,805.3516 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99" x="664" y="822.4185">Staker receives</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="171" x="664" y="837.5513">(5x reward * entries count)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83" x="664" y="852.6841">+ priority fee</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="664" y="867.8169">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="664" y="882.9497">Reward scales with work</text><line style="stroke:#181818;stroke-width:1.0;" x1="252" x2="294" y1="924.1484" y2="924.1484"/><line style="stroke:#181818;stroke-width:1.0;" x1="294" x2="294" y1="924.1484" y2="937.1484"/><line style="stroke:#181818;stroke-width:1.0;" x1="253" x2="294" y1="937.1484" y2="937.1484"/><polygon fill="#181818" points="263,933.1484,253,937.1484,263,941.1484,259,937.1484" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="346" x="259" y="919.0825">identityDetails[identity].customMetadataMaxSlots = 0</text><line style="stroke:#181818;stroke-width:1.0;" x1="252" x2="294" y1="971.2813" y2="971.2813"/><line style="stroke:#181818;stroke-width:1.0;" x1="294" x2="294" y1="971.2813" y2="984.2813"/><line style="stroke:#181818;stroke-width:1.0;" x1="247" x2="294" y1="984.2813" y2="984.2813"/><polygon fill="#181818" points="257,980.2813,247,984.2813,257,988.2813,253,984.2813" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="257" x="259" y="966.2153">nameServiceNonce[user][nonce] = true</text><!--SRC=[bLN1JY914BttLrJq0gkoP9Ezi6gYBEoQY19HBs1CELq37PhkINVF835-rzxtoxPxO811H1SkJ4-zwghtNXN7riqadJAketH2oi4B0_yvnsZyo-XKyQQMsi1q91onLtRyTH7FC7B-VE_EaW7_eqSc4n7j0Lf8_HbBq3WHYGHzphqhdD1wX5ezmtwztcorMcL0w_w-aqTIbar2IAlrhSwO4quIn3AresPgdPvqo257Xt1hK5bVaz0Asb9F1who6vDa1brq8pY2NXf5P6sSIcWzKvI6m2fZIZi28uOZ1msueOdE2CukBs5IvFMK645se3hQ40pH7b4S-p83LMw42eJY8XCyHGacu54Er42Tft8Cd2Jvz3eXW-4-nW8pS7HQwh-nhP_Atp_XMyrv5XdwDDiuO-k7R_9g9MVNKqNcEhxWlc3XPgkyEv4P6H7FBk8hhIAwi6SP2ebFaluBtl5yuv1wOgY8jxLfxshp4_aWAc4x-DoJsbauXVe7-0cEgOj5yuSm9DSr_jMjtbQJM71LFOIL2jB1VZu4a1YXZN_TbZXy33w5anDm9gLyS3RgoEtRW0HdFUUBC8zePofQjXqGIu5BLYTfQUUDCVg8JrrPkf4KPomFMONUp-drY7m329MapZiU5OSquQ6q9vJedM2No3A_tGKoCJeC6N6mot6JCyQfrEC7OiL-cqYjaqOnFoZbbdaCOHK19r3_0GAElSPpE_YdWuFgGBqKy4BEiihzulYXBnxWjRm8pj55emM-iHfzM8x-GBqp-xPa5M7FE3UUXxaIbOaTrgnNW4nrct9lJTl4ODjQRHw-G-q8L_xUPQlmPaFzkxB4WV-1idd1lgif6cvBi7ALDta4S66zBa-fszG-83VrN_MoJdglk38YaGM5Az-V5mN0bq9tYFn_alFo7Yod0cAYi78NbTW8fO-R2h_sfzgCvuxVoNHXXP_U6qBQbJLgxsoSamytpjfJlaFxOVC_z5Nu_G2BVR4-66i0zWy0]--></g></svg>