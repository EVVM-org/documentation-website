<?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1055px" preserveAspectRatio="none" style="width:860px;height:1055px;background:#FFFFFF;" version="1.1" viewBox="0 0 860 1055" width="860px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="301" x="281" y="27.9951">addCustomMetadata Transaction Flow</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="285" x="289" y="44.292">(Happy Path - Successful Execution)</text><rect fill="#00CEEE" height="784.125" style="stroke:#181818;stroke-width:1.0;" width="10" x="236" y="166.0234"/><rect fill="#00EE20" height="137.3359" style="stroke:#181818;stroke-width:1.0;" width="10" x="601" y="429.9531"/><rect fill="#00EE20" height="119.6641" style="stroke:#181818;stroke-width:1.0;" width="10" x="601" y="662.6875"/><rect fill="#FFFFFF" height="90.2031" style="stroke:#000000;stroke-width:1.5;" width="463.5" x="179" y="391.6875"/><rect fill="#FFFFFF" height="43.9375" style="stroke:none;stroke-width:1.0;" width="463.5" x="179" y="437.9531"/><rect fill="#FFFFFF" height="241.3281" style="stroke:#000000;stroke-width:1.5;" width="675" x="179" y="582.2891"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="60" x2="60" y1="134.8906" y2="975.1484"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="241" x2="241" y1="134.8906" y2="975.1484"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="605.5" x2="605.5" y1="134.8906" y2="975.1484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="104" x="5" y="131.5889">User or Service</text><ellipse cx="60" cy="67.0938" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M60,75.0938 L60,102.0938 M47,83.0938 L73,83.0938 M60,102.0938 L47,117.0938 M60,102.0938 L73,117.0938 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="104" x="5" y="987.1436">User or Service</text><ellipse cx="60" cy="998.9453" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M60,1006.9453 L60,1033.9453 M47,1014.9453 L73,1014.9453 M60,1033.9453 L47,1048.9453 M60,1033.9453 L73,1048.9453 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#00CEEE" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="104" x="189" y="103.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90" x="196" y="123.5889">NameService</text><rect fill="#00CEEE" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="104" x="189" y="974.1484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90" x="196" y="994.1436">NameService</text><rect fill="#00EE20" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="53" x="579.5" y="103.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="586.5" y="123.5889">EVVM</text><rect fill="#00EE20" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="53" x="579.5" y="974.1484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="586.5" y="994.1436">EVVM</text><rect fill="#00CEEE" height="784.125" style="stroke:#181818;stroke-width:1.0;" width="10" x="236" y="166.0234"/><rect fill="#00EE20" height="137.3359" style="stroke:#181818;stroke-width:1.0;" width="10" x="601" y="429.9531"/><rect fill="#00EE20" height="119.6641" style="stroke:#181818;stroke-width:1.0;" width="10" x="601" y="662.6875"/><polygon fill="#181818" points="224,162.0234,234,166.0234,224,170.0234,228,166.0234" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="60" x2="230" y1="166.0234" y2="166.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="157" x="67" y="160.9575">addCustomMetadata(&#183;&#183;&#183;)</text><line style="stroke:#181818;stroke-width:1.0;" x1="246" x2="288" y1="195.1563" y2="195.1563"/><line style="stroke:#181818;stroke-width:1.0;" x1="288" x2="288" y1="195.1563" y2="208.1563"/><line style="stroke:#181818;stroke-width:1.0;" x1="247" x2="288" y1="208.1563" y2="208.1563"/><polygon fill="#181818" points="257,204.1563,247,208.1563,257,212.1563,253,208.1563" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149" x="253" y="190.0903">onlyOwnerOfIdentity(&#183;&#183;&#183;)</text><line style="stroke:#181818;stroke-width:1.0;" x1="246" x2="288" y1="237.2891" y2="237.2891"/><line style="stroke:#181818;stroke-width:1.0;" x1="288" x2="288" y1="237.2891" y2="250.2891"/><line style="stroke:#181818;stroke-width:1.0;" x1="247" x2="288" y1="250.2891" y2="250.2891"/><polygon fill="#181818" points="257,246.2891,247,250.2891,257,254.2891,253,250.2891" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="171" x="253" y="232.2231">verifyAsyncNonce(user, nonce)</text><line style="stroke:#181818;stroke-width:1.0;" x1="246" x2="288" y1="279.4219" y2="279.4219"/><line style="stroke:#181818;stroke-width:1.0;" x1="288" x2="288" y1="279.4219" y2="292.4219"/><line style="stroke:#181818;stroke-width:1.0;" x1="247" x2="288" y1="292.4219" y2="292.4219"/><polygon fill="#181818" points="257,288.4219,247,292.4219,257,296.4219,253,292.4219" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="188" x="253" y="274.356">verify bytes(value).length &gt; 0</text><line style="stroke:#181818;stroke-width:1.0;" x1="246" x2="288" y1="321.5547" y2="321.5547"/><line style="stroke:#181818;stroke-width:1.0;" x1="288" x2="288" y1="321.5547" y2="334.5547"/><line style="stroke:#181818;stroke-width:1.0;" x1="247" x2="288" y1="334.5547" y2="334.5547"/><polygon fill="#181818" points="257,330.5547,247,334.5547,257,338.5547,253,334.5547" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="313" x="253" y="316.4888">verifyMessageSignedForAddCustomMetadata(&#183;&#183;&#183;)</text><line style="stroke:#181818;stroke-width:1.0;" x1="246" x2="288" y1="363.6875" y2="363.6875"/><line style="stroke:#181818;stroke-width:1.0;" x1="288" x2="288" y1="363.6875" y2="376.6875"/><line style="stroke:#181818;stroke-width:1.0;" x1="247" x2="288" y1="376.6875" y2="376.6875"/><polygon fill="#181818" points="257,372.6875,247,376.6875,257,380.6875,253,376.6875" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="322" x="253" y="358.6216">makePay(&#183;&#183;&#183;, getPriceToAddCustomMetadata(), &#183;&#183;&#183;)</text><path d="M179,391.6875 L243,391.6875 L243,398.8203 L233,408.8203 L179,408.8203 L179,391.6875 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="90.2031" style="stroke:#000000;stroke-width:1.5;" width="463.5" x="179" y="391.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="194" y="404.7544">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="177" x="258" y="403.8979">[priorityFlag_EVVM == true]</text><polygon fill="#181818" points="589,425.9531,599,429.9531,589,433.9531,593,429.9531" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="246" x2="595" y1="429.9531" y2="429.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="253" y="424.8872">payStaker_async(&#183;&#183;&#183;)</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="179" x2="642.5" y1="438.9531" y2="438.9531"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="183" x="184" y="449.1636">[priorityFlag_EVVM == false]</text><polygon fill="#181818" points="589,469.8906,599,473.8906,589,477.8906,593,473.8906" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="246" x2="595" y1="473.8906" y2="473.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123" x="253" y="468.8247">payStaker_sync(&#183;&#183;&#183;)</text><line style="stroke:#181818;stroke-width:1.0;" x1="611" x2="653" y1="525.1563" y2="525.1563"/><line style="stroke:#181818;stroke-width:1.0;" x1="653" x2="653" y1="525.1563" y2="538.1563"/><line style="stroke:#181818;stroke-width:1.0;" x1="612" x2="653" y1="538.1563" y2="538.1563"/><polygon fill="#181818" points="622,534.1563,612,538.1563,622,542.1563,618,538.1563" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140" x="618" y="504.9575">Verify payment inputs</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="618" y="520.0903">and update balances</text><polygon fill="#181818" points="257,563.2891,247,567.2891,257,571.2891,253,567.2891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="251" x2="605" y1="567.2891" y2="567.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="207" x="263" y="562.2231">Payment processed successfully</text><path d="M179,582.2891 L243,582.2891 L243,589.4219 L233,599.4219 L179,599.4219 L179,582.2891 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="241.3281" style="stroke:#000000;stroke-width:1.5;" width="675" x="179" y="582.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="194" y="595.356">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="197" x="258" y="594.4995">[isAddressStaker(msg.sender)]</text><line style="stroke:#181818;stroke-width:1.0;" x1="246" x2="288" y1="620.5547" y2="620.5547"/><line style="stroke:#181818;stroke-width:1.0;" x1="288" x2="288" y1="620.5547" y2="633.5547"/><line style="stroke:#181818;stroke-width:1.0;" x1="247" x2="288" y1="633.5547" y2="633.5547"/><polygon fill="#181818" points="257,629.5547,247,633.5547,257,637.5547,253,633.5547" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="253" y="615.4888">makeCaPay(..)</text><polygon fill="#181818" points="589,658.6875,599,662.6875,589,666.6875,593,662.6875" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="246" x2="595" y1="662.6875" y2="662.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="60" x="253" y="657.6216">caPay(&#183;&#183;&#183;)</text><line style="stroke:#181818;stroke-width:1.0;" x1="611" x2="653" y1="706.9531" y2="706.9531"/><line style="stroke:#181818;stroke-width:1.0;" x1="653" x2="653" y1="706.9531" y2="719.9531"/><line style="stroke:#181818;stroke-width:1.0;" x1="612" x2="653" y1="719.9531" y2="719.9531"/><polygon fill="#181818" points="622,715.9531,612,719.9531,622,723.9531,618,719.9531" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="618" y="686.7544">Update balances for</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="618" y="701.8872">staker rewards</text><polygon fill="#181818" points="257,778.3516,247,782.3516,257,786.3516,253,782.3516" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="251" x2="605" y1="782.3516" y2="782.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="198" x="263" y="777.2856">Reward distributed successfully</text><path d="M616,732.9531 L616,817.9531 L839,817.9531 L839,742.9531 L829,732.9531 L616,732.9531 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M829,732.9531 L829,742.9531 L839,742.9531 L829,732.9531 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99" x="622" y="750.02">Staker receives</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="178" x="622" y="765.1528">5x reward + 50% fee refund</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83" x="622" y="780.2856">+ priority fee</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="622" y="795.4185">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="202" x="622" y="810.5513">Encourages metadata adoption</text><line style="stroke:#181818;stroke-width:1.0;" x1="246" x2="288" y1="855.8164" y2="855.8164"/><line style="stroke:#181818;stroke-width:1.0;" x1="288" x2="288" y1="855.8164" y2="868.8164"/><line style="stroke:#181818;stroke-width:1.0;" x1="247" x2="288" y1="868.8164" y2="868.8164"/><polygon fill="#181818" points="257,864.8164,247,868.8164,257,872.8164,253,868.8164" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="301" x="253" y="850.7505">identityCustomMetadata[identity][slot] = value</text><path d="M566,835.6172 L566,875.6172 L711,875.6172 L711,845.6172 L701,835.6172 L566,835.6172 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M701,835.6172 L701,845.6172 L711,845.6172 L701,835.6172 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124" x="572" y="852.6841">Slot auto-assigned:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114" x="572" y="867.8169">incremental index</text><line style="stroke:#181818;stroke-width:1.0;" x1="246" x2="288" y1="902.0156" y2="902.0156"/><line style="stroke:#181818;stroke-width:1.0;" x1="288" x2="288" y1="902.0156" y2="915.0156"/><line style="stroke:#181818;stroke-width:1.0;" x1="247" x2="288" y1="915.0156" y2="915.0156"/><polygon fill="#181818" points="257,911.0156,247,915.0156,257,919.0156,253,915.0156" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="341" x="253" y="896.9497">identityDetails[identity].customMetadataMaxSlots++</text><line style="stroke:#181818;stroke-width:1.0;" x1="246" x2="288" y1="949.1484" y2="949.1484"/><line style="stroke:#181818;stroke-width:1.0;" x1="288" x2="288" y1="949.1484" y2="962.1484"/><line style="stroke:#181818;stroke-width:1.0;" x1="241" x2="288" y1="962.1484" y2="962.1484"/><polygon fill="#181818" points="251,958.1484,241,962.1484,251,966.1484,247,962.1484" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="257" x="253" y="944.0825">markAsyncNonceAsUsed(user, nonce)</text><!--SRC=[bLHDRnen4BtxLumILG8HAAgK2qgGKWfj3YIe9BcmA1gy0rZnsYlRIrXL_LszzvVLNZuNKfh2nMk_cNdpvkFAkbnIcyMQPmaf1pyO-Dzdv2zVZSvKtD5I6tYT2qVi9xlwkCOpvCxVdprQCk0FGp8BmUaCq4BcxrYAnWakKlG-p-umeNs4sdt3URFPwNQxPOFkqrE_GD9YaGH8j_kfoPWJJX9W77SowtJI9uSnEeG7WyfwHa8hw4dz6gdADqpJ70Revb27OSOvMJlD97INnBC0h3Acj2CmOZPtq8Ajiwas2RfMf4QMpod1SMjaiydwt1ujK6OqZbIaUfAMOk89lL1UBwx1ip8ueqXv9u0g1wtgV8v2GN3DM906wksI0AtZX2g_VuL_jP1PBD3JV4iojdzvv5KhcT-_AZBtqzlObrQuVEVtfEM2Z9ZcjzCxhJZTsfi52ea-qVyoXqdko5OANQeDIMhcIz66vhkC-xvQNiUXc2cAUzhS_5sXazuIVA41RlA-W1cvWV5F3_hOO_K2Th9B1-T5qqDgX3PUkvx4sNFeIxY-1cSoAWRb87hHhYr8CHyw7zeyeyqLtv8D5jkAbbgRfAMJ4QVe4UyAMOf8AcQiWEoWJwlwU8jYueLACsSZXIg6B8q3jGbAzAMtMykogeErPMfq62kAmMu7JEOifbAE9JM5zS8R3rsHhIHsrh2U99dgMyaTLxE3ePwDnWf-GX2EkyAVKZwy70ZqM5OXR8H8sO8m67f54zkIMPdbzm81iR3EY4dc3kK9beSIxNBPNqd3JKXEOa6-H9VBTNoemMNp0qp9WsdgrtIaQjk-2TTXFtKLrrbOHnQIpNB3MATX-wqQuwJQOhqqocCosboFHrPgDuPhA4Qyl4o7_WamSxgErXP3xFUfKDnGQ1oKlkbYMhwJm1SVMaYxYzpW9KfzN8PujbRxXyEzhsArZS8w7ezKE8T4YgdURzyz0_O7]--></g></svg>